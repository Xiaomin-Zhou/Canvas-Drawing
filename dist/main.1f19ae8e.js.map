{"version":3,"sources":["main.js"],"names":["canvas","document","getElementById","width","documentElement","clientWidth","height","clientHeight","ctx","getContext","strokeStyle","lineWidth","lineCap","painting","eraserEnabled","last","LiColor","getElementsByTagName","listenToUser","getColor","i","length","onclick","classList","remove","add","activeColor","style","backgroundColor","console","log","fillStyle","thin","normal","strong","eraser","pen","write","clear","clearRect","download","url","toDataURL","window","alert","a","createElement","href","click","historyData","saveData","data","shift","push","undo","putImageData","pop","is_touch_device","createEvent","e","ontouchstart","firstDot","getImageData","x","touches","clientX","y","clientY","ontouchmove","drawLine","onmousedown","onmouseup","onmousemove","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAb;AACAF,MAAM,CAACG,KAAP,GAAeF,QAAQ,CAACG,eAAT,CAAyBC,WAAxC;AACAL,MAAM,CAACM,MAAP,GAAgBL,QAAQ,CAACG,eAAT,CAAyBG,YAAzC;AACA,IAAIC,GAAG,GAAGR,MAAM,CAACS,UAAP,CAAkB,IAAlB,CAAV;AACAD,GAAG,CAACE,WAAJ,GAAkB,MAAlB;AACA,IAAIC,SAAS,GAAG,CAAhB;AACAH,GAAG,CAACI,OAAJ,GAAc,OAAd;AAEA,IAAIC,QAAQ,GAAG,KAAf;AACA,IAAIC,aAAa,GAAG,KAApB;AACA,IAAIC,IAAJ;AACA,IAAIC,OAAO,GAAGf,QAAQ,CAACgB,oBAAT,CAA8B,IAA9B,CAAd;AACAC,YAAY;AACZC,QAAQ;;AAER,SAASA,QAAT,GAAmB;AACf,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,OAAO,CAACK,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrCJ,IAAAA,OAAO,CAACI,CAAD,CAAP,CAAWE,OAAX,GAAqB,YAAY;AAC7B,WAAK,IAAIF,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGJ,OAAO,CAACK,MAA5B,EAAoCD,EAAC,EAArC,EAAyC;AACrCJ,QAAAA,OAAO,CAACI,EAAD,CAAP,CAAWG,SAAX,CAAqBC,MAArB,CAA4B,QAA5B;;AACA,aAAKD,SAAL,CAAeE,GAAf,CAAmB,QAAnB;AACAC,QAAAA,WAAW,GAAG,KAAKC,KAAL,CAAWC,eAAzB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKH,KAAL,CAAWC,eAAvB;AACApB,QAAAA,GAAG,CAACuB,SAAJ,GAAgBL,WAAhB;AACAlB,QAAAA,GAAG,CAACE,WAAJ,GAAkBgB,WAAlB;AACH;AACJ,KATD;AAUH;AACJ;;AAED,SAASR,YAAT,GAAwB;AAAA;;AACpBc,EAAAA,IAAI,CAACV,OAAL,GAAe,YAAU;AACrBX,IAAAA,SAAS,GAAG,CAAZ;AACAqB,IAAAA,IAAI,CAACT,SAAL,CAAeE,GAAf,CAAmB,QAAnB;AACAQ,IAAAA,MAAM,CAACV,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACAU,IAAAA,MAAM,CAACX,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACAW,IAAAA,MAAM,CAACZ,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACH,GAND;;AAOAS,EAAAA,MAAM,CAACX,OAAP,GAAiB,YAAU;AACvBX,IAAAA,SAAS,GAAG,CAAZ;AACAsB,IAAAA,MAAM,CAACV,SAAP,CAAiBE,GAAjB,CAAqB,QAArB;AACAO,IAAAA,IAAI,CAACT,SAAL,CAAeC,MAAf,CAAsB,QAAtB;AACAU,IAAAA,MAAM,CAACX,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACAW,IAAAA,MAAM,CAACZ,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACH,GAND;;AAOAU,EAAAA,MAAM,CAACZ,OAAP,GAAiB,YAAU;AACvBX,IAAAA,SAAS,GAAG,EAAZ;AACAuB,IAAAA,MAAM,CAACX,SAAP,CAAiBE,GAAjB,CAAqB,QAArB;AACAO,IAAAA,IAAI,CAACT,SAAL,CAAeC,MAAf,CAAsB,QAAtB;AACAS,IAAAA,MAAM,CAACV,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACAW,IAAAA,MAAM,CAACZ,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACH,GAND;;AAOAW,EAAAA,MAAM,CAACb,OAAP,GAAiB,YAAY;AACzBR,IAAAA,aAAa,GAAG,IAAhB;AACAqB,IAAAA,MAAM,CAACZ,SAAP,CAAiBE,GAAjB,CAAqB,QAArB;AACAW,IAAAA,GAAG,CAACb,SAAJ,CAAcC,MAAd,CAAqB,QAArB;AACAQ,IAAAA,IAAI,CAACT,SAAL,CAAeC,MAAf,CAAsB,QAAtB;AACAS,IAAAA,MAAM,CAACV,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACAU,IAAAA,MAAM,CAACX,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACH,GAPD;;AAQAY,EAAAA,GAAG,CAACd,OAAJ,GAAc,SAASe,KAAT,GAAiB;AAC3BvB,IAAAA,aAAa,GAAG,KAAhB;AACAsB,IAAAA,GAAG,CAACb,SAAJ,CAAcE,GAAd,CAAkB,QAAlB;AACAU,IAAAA,MAAM,CAACZ,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACH,GAJD;;AAKAc,EAAAA,KAAK,CAAChB,OAAN,GAAgB,YAAU;AACtBd,IAAAA,GAAG,CAAC+B,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBvC,MAAM,CAACG,KAA3B,EAAkCH,MAAM,CAACM,MAAzC;AACA6B,IAAAA,MAAM,CAACZ,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACH,GAHD;;AAIAgB,EAAAA,QAAQ,CAAClB,OAAT,GAAmB,YAAU;AACzB,QAAImB,GAAG,GAAGzC,MAAM,CAAC0C,SAAP,EAAV;AACAC,IAAAA,MAAM,CAACC,KAAP,CAAa,2BAAb;AACA,QAAIC,CAAC,GAAG5C,QAAQ,CAAC6C,aAAT,CAAuB,GAAvB,CAAR;AACAD,IAAAA,CAAC,CAACL,QAAF,GAAa,eAAb;AACAK,IAAAA,CAAC,CAACE,IAAF,GAASN,GAAT;AACAI,IAAAA,CAAC,CAACG,KAAF;AACAb,IAAAA,MAAM,CAACZ,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACH,GARD;;AAUA,MAAIyB,WAAW,GAAG,EAAlB;;AACA,WAASC,QAAT,CAAmBC,IAAnB,EAAyB;AACxBF,IAAAA,WAAW,CAAC5B,MAAZ,KAAuB,EAAxB,IAAgC4B,WAAW,CAACG,KAAZ,EAAhC,CADyB,CAC4B;;AACrDH,IAAAA,WAAW,CAACI,IAAZ,CAAiBF,IAAjB;AACC;;AAEDG,EAAAA,IAAI,CAAChC,OAAL,GAAe,YAAU;AACrBa,IAAAA,MAAM,CAACZ,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;AACA,QAAGyB,WAAW,CAAC5B,MAAZ,GAAqB,CAAxB,EAA2B,OAAO,KAAP;AAC3Bb,IAAAA,GAAG,CAAC+C,YAAJ,CAAiBN,WAAW,CAACA,WAAW,CAAC5B,MAAZ,GAAqB,CAAtB,CAA5B,EAAsD,CAAtD,EAAyD,CAAzD;AACA4B,IAAAA,WAAW,CAACO,GAAZ;AACH,GALD,CAvDoB,CA6DpB;;;AACA,WAASC,eAAT,GAA2B;AAC3B,QAAI;AACAxD,MAAAA,QAAQ,CAACyD,WAAT,CAAqB,YAArB;AACA,aAAO,IAAP;AACH,KAHD,CAGE,OAAOC,CAAP,EAAU;AACR,aAAO,KAAP;AACH;AACA,GArEmB,CAsEpB;;;AACA,MAAGF,eAAe,EAAlB,EAAqB;AACrBzD,IAAAA,MAAM,CAAC4D,YAAP,GAAqB,UAACD,CAAD,EAAK;AACtB,MAAA,KAAI,CAACE,QAAL,GAAgBrD,GAAG,CAACsD,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB9D,MAAM,CAACG,KAA9B,EAAqCH,MAAM,CAACM,MAA5C,CAAhB,CADsB,CAC8C;;AACpE4C,MAAAA,QAAQ,CAAC,KAAI,CAACW,QAAN,CAAR;AACAhD,MAAAA,QAAQ,GAAG,IAAX;AACA,UAAIkD,CAAC,GAAGJ,CAAC,CAACK,OAAF,CAAU,CAAV,EAAaC,OAArB;AACA,UAAIC,CAAC,GAAGP,CAAC,CAACK,OAAF,CAAU,CAAV,EAAaG,OAArB,CALsB,CAMtB;;AACApD,MAAAA,IAAI,GAAG,CAACgD,CAAD,EAAGG,CAAH,CAAP;AACH,KARD;;AASAlE,IAAAA,MAAM,CAACoE,WAAP,GAAqB,UAACT,CAAD,EAAK;AACtB,UAAII,CAAC,GAAGJ,CAAC,CAACK,OAAF,CAAU,CAAV,EAAaC,OAArB;AACA,UAAIC,CAAC,GAAGP,CAAC,CAACK,OAAF,CAAU,CAAV,EAAaG,OAArB;;AACA,UAAItD,QAAJ,EAAc;AACV,YAAIC,aAAJ,EAAmB;AACfN,UAAAA,GAAG,CAAC+B,SAAJ,CAAcwB,CAAC,GAAG,CAAlB,EAAqBG,CAAC,GAAG,CAAzB,EAA4B,EAA5B,EAAgC,EAAhC;AACH,SAFD,MAEK;AACDG,UAAAA,QAAQ,CAACtD,IAAI,CAAC,CAAD,CAAL,EAASA,IAAI,CAAC,CAAD,CAAb,EAAiBgD,CAAjB,EAAmBG,CAAnB,CAAR,CADC,CAED;;AACAnD,UAAAA,IAAI,GAAG,CAACgD,CAAD,EAAGG,CAAH,CAAP;AACH;AACJ;AACJ,KAZD;AAaC,GAvBD,MAuBK;AACD;AACAlE,IAAAA,MAAM,CAACsE,WAAP,GAAqB,UAACX,CAAD,EAAM;AACvB,MAAA,KAAI,CAACE,QAAL,GAAgBrD,GAAG,CAACsD,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB9D,MAAM,CAACG,KAA9B,EAAqCH,MAAM,CAACM,MAA5C,CAAhB,CADuB,CAC6C;;AACpE4C,MAAAA,QAAQ,CAAC,KAAI,CAACW,QAAN,CAAR;AACAhD,MAAAA,QAAQ,GAAG,IAAX;AACAE,MAAAA,IAAI,GAAG,CAAC4C,CAAC,CAACM,OAAH,EAAYN,CAAC,CAACQ,OAAd,CAAP;AACH,KALD;;AAMAnE,IAAAA,MAAM,CAACuE,SAAP,GAAmB,UAACZ,CAAD,EAAM;AACrB9C,MAAAA,QAAQ,GAAG,KAAX;AACH,KAFD;;AAIAb,IAAAA,MAAM,CAACwE,WAAP,GAAqB,UAACb,CAAD,EAAK;AACtB,UAAI9C,QAAQ,KAAK,IAAjB,EAAsB;AAClB,YAAIC,aAAJ,EAAmB;AACfN,UAAAA,GAAG,CAAC+B,SAAJ,CAAcoB,CAAC,CAACM,OAAF,GAAY,CAA1B,EAA6BN,CAAC,CAACQ,OAAF,GAAY,CAAzC,EAA4C,EAA5C,EAAgD,EAAhD;AACH,SAFD,MAEK;AACDE,UAAAA,QAAQ,CAACtD,IAAI,CAAC,CAAD,CAAL,EAASA,IAAI,CAAC,CAAD,CAAb,EAAiB4C,CAAC,CAACM,OAAnB,EAA4BN,CAAC,CAACQ,OAA9B,CAAR;AACApD,UAAAA,IAAI,GAAG,CAAC4C,CAAC,CAACM,OAAH,EAAYN,CAAC,CAACQ,OAAd,CAAP;AACH;AACJ;AACJ,KATD;AAUH;AACJ,EACD;;;AACA,SAASE,QAAT,CAAkBI,EAAlB,EAAqBC,EAArB,EAAwBC,EAAxB,EAA2BC,EAA3B,EAA8B;AAC9BpE,EAAAA,GAAG,CAACqE,SAAJ;AACArE,EAAAA,GAAG,CAACsE,MAAJ,CAAWL,EAAX,EAAeC,EAAf;AACAlE,EAAAA,GAAG,CAACuE,MAAJ,CAAWJ,EAAX,EAAeC,EAAf;AACApE,EAAAA,GAAG,CAACG,SAAJ,GAAgBA,SAAhB,CAJ8B,CAIH;;AAC3BH,EAAAA,GAAG,CAACwE,MAAJ;AACC","file":"main.1f19ae8e.js","sourceRoot":"..\\src","sourcesContent":["let canvas = document.getElementById(\"canvas\");\r\ncanvas.width = document.documentElement.clientWidth\r\ncanvas.height = document.documentElement.clientHeight\r\nlet ctx = canvas.getContext(\"2d\");\r\nctx.strokeStyle = 'none';\r\nvar lineWidth = 5\r\nctx.lineCap = \"round\";\r\n\r\nlet painting = false;\r\nvar eraserEnabled = false \r\nlet last;\r\nlet LiColor = document.getElementsByTagName(\"li\");\r\nlistenToUser()\r\ngetColor();\r\n\r\nfunction getColor(){\r\n    for (let i = 0; i < LiColor.length; i++) {\r\n        LiColor[i].onclick = function () {\r\n            for (let i = 0; i < LiColor.length; i++) {\r\n                LiColor[i].classList.remove(\"active\");\r\n                this.classList.add(\"active\");\r\n                activeColor = this.style.backgroundColor;\r\n                console.log(this.style.backgroundColor)\r\n                ctx.fillStyle = activeColor;\r\n                ctx.strokeStyle = activeColor;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction listenToUser() {\r\n    thin.onclick = function(){\r\n        lineWidth = 2\r\n        thin.classList.add(\"active\")\r\n        normal.classList.remove(\"active\")\r\n        strong.classList.remove(\"active\")\r\n        eraser.classList.remove(\"active\")\r\n    }\r\n    normal.onclick = function(){\r\n        lineWidth = 5\r\n        normal.classList.add(\"active\")\r\n        thin.classList.remove(\"active\")\r\n        strong.classList.remove(\"active\")\r\n        eraser.classList.remove(\"active\")\r\n    }\r\n    strong.onclick = function(){\r\n        lineWidth = 10\r\n        strong.classList.add(\"active\")\r\n        thin.classList.remove(\"active\")\r\n        normal.classList.remove(\"active\")\r\n        eraser.classList.remove(\"active\")\r\n    }\r\n    eraser.onclick = function () {\r\n        eraserEnabled = true\r\n        eraser.classList.add(\"active\")\r\n        pen.classList.remove(\"active\")\r\n        thin.classList.remove(\"active\")\r\n        normal.classList.remove(\"active\")\r\n        strong.classList.remove(\"active\")\r\n    }\r\n    pen.onclick = function write() {\r\n        eraserEnabled = false\r\n        pen.classList.add(\"active\")\r\n        eraser.classList.remove(\"active\")\r\n    }\r\n    clear.onclick = function(){\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n        eraser.classList.remove(\"active\")\r\n    }\r\n    download.onclick = function(){\r\n        var url = canvas.toDataURL()\r\n        window.alert(\"已经保存在本地，命名为：myDrawing.png\")\r\n        var a = document.createElement(\"a\")\r\n        a.download = \"myDrawing.png\"\r\n        a.href = url\r\n        a.click()\r\n        eraser.classList.remove(\"active\")\r\n    }\r\n\r\n    let historyData = [];\r\n    function saveData (data) {\r\n    (historyData.length === 10) && (historyData.shift());// 储存上限为10步\r\n    historyData.push(data);\r\n    }\r\n\r\n    undo.onclick = function(){\r\n        eraser.classList.remove(\"active\")\r\n        if(historyData.length < 1) return false;\r\n        ctx.putImageData(historyData[historyData.length - 1], 0, 0);\r\n        historyData.pop()\r\n    };\r\n    //检测手机设备\r\n    function is_touch_device() {  \r\n    try {  \r\n        document.createEvent(\"TouchEvent\");  \r\n        return true;  \r\n    } catch (e) {  \r\n        return false;  \r\n    }  \r\n    }\r\n    // 判断是手机设备后，用drawLine画线，保留上次画的点\r\n    if(is_touch_device()){\r\n    canvas.ontouchstart =(e)=>{\r\n        this.firstDot = ctx.getImageData(0, 0, canvas.width, canvas.height);//在这里储存绘图\r\n        saveData(this.firstDot);\r\n        painting = true\r\n        let x = e.touches[0].clientX;\r\n        let y = e.touches[0].clientY;\r\n        // 起点\r\n        last = [x,y];\r\n    }\r\n    canvas.ontouchmove = (e)=>{\r\n        let x = e.touches[0].clientX;\r\n        let y = e.touches[0].clientY;\r\n        if (painting) {           \r\n            if (eraserEnabled) {\r\n                ctx.clearRect(x - 5, y - 5, 20, 20)\r\n            }else{\r\n                drawLine(last[0],last[1],x,y);\r\n                // 时时更新 last\r\n                last = [x,y];\r\n            }\r\n        }\r\n    }\r\n    }else{\r\n        // 判断在PC端，painting 是用来 停/起 笔的;\r\n        canvas.onmousedown = (e) =>{\r\n            this.firstDot = ctx.getImageData(0, 0, canvas.width, canvas.height);//在这里储存绘图\r\n            saveData(this.firstDot);\r\n            painting = true;\r\n            last = [e.clientX, e.clientY];\r\n        }\r\n        canvas.onmouseup = (e) =>{\r\n            painting = false;\r\n        }\r\n\r\n        canvas.onmousemove = (e)=>{\r\n            if (painting === true){\r\n                if (eraserEnabled) {\r\n                    ctx.clearRect(e.clientX - 5, e.clientY - 5, 20, 20)\r\n                }else{\r\n                    drawLine(last[0],last[1],e.clientX, e.clientY);\r\n                    last = [e.clientX, e.clientY];\r\n                } \r\n            }\r\n        }\r\n    }\r\n}\r\n// 两点之间用canvas画线的 函数\r\nfunction drawLine(x1,y1,x2,y2){\r\nctx.beginPath();\r\nctx.moveTo(x1, y1);\r\nctx.lineTo(x2, y2);\r\nctx.lineWidth = lineWidth  //线 粗细设置\r\nctx.stroke();\r\n}"]}